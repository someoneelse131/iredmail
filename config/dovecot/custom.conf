# =============================================================================
# Dovecot Custom Configuration
# This file is included as /etc/dovecot/conf.d/99-custom.conf
# =============================================================================

# =============================================================================
# Logging - Write to shared directory for fail2ban integration
# =============================================================================
log_path = /var/log/iredmail/dovecot.log
info_log_path = /var/log/iredmail/dovecot.log
debug_log_path = /var/log/iredmail/dovecot.log

# =============================================================================
# Custom Settings
# =============================================================================

# Example: Increase mail process limits
# mail_max_userip_connections = 50

# Example: Enable debugging
# mail_debug = yes
# auth_debug = yes

# =============================================================================
# lazy_expunge - verschiebt gelöschte Mails statt sie zu löschen
# =============================================================================
protocol imap {
  mail_plugins = $mail_plugins lazy_expunge
}

protocol lmtp {
  mail_plugins = $mail_plugins lazy_expunge
}

namespace {
  prefix = .EXPUNGED/
  hidden = yes
  list = no
  subscriptions = no
  location = maildir:~/Maildir/.EXPUNGED
}

plugin {
  lazy_expunge = .EXPUNGED/
}
